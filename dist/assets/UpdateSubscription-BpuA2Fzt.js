import{l as x,m as h,r as b,n as y,A as r,o as w,g as f,j as s,B as j}from"./index-5lFW-7Db.js";import{D as N,a as S,E as v,b as P,c as C,d as m}from"./dropdown-menu-DUnPNtut.js";import{T as I,a as T,b as g,c as i,d as M,e as n}from"./table-BiTwULl8.js";import{u as W}from"./useGetUserSubscriptions-CDsGdSgw.js";import"./index-pw5sjdF0.js";const D=()=>{const{chainId:a}=x(),{walletProvider:t}=h();return b.useCallback(async c=>{if(!y(a))return r.error("Wrong network !",{position:"top-right"});if(!t)return r.error("Please connect your wallet !",{position:"top-right"});const l=await w(t).getSigner(),d=f(l),e=r.loading("Processing...",{position:"top-right"});try{const o=await d.pauseSubscription(c);console.log("transaction: ",o);const p=await o.wait();if(console.log("receipt: ",p),p.status)return r.dismiss(e),r.success("Subscription paused!",{position:"top-right"});r.dismiss(e),r.error("Pausing of subscription failed !",{position:"top-right"})}catch(o){console.error(o),r.dismiss(e),r.error(`${o.message.slice(0,20)}...`,{position:"top-right"})}},[a,t])},R=()=>{const{chainId:a}=x(),{walletProvider:t}=h();return b.useCallback(async c=>{if(!y(a))return r.error("Wrong network !",{position:"top-right"});if(!t)return r.error("Please connect your wallet !",{position:"top-right"});const l=await w(t).getSigner(),d=f(l),e=r.loading("Processing...",{position:"top-right"});try{const o=await d.resumeSubscription(c);console.log("transaction: ",o);const p=await o.wait();if(console.log("receipt: ",p),p.status)return r.dismiss(e),r.success("Subscription resumed!",{position:"top-right"});r.dismiss(e),r.error("Resuming of subscription failed !",{position:"top-right"})}catch(o){console.error(o),r.dismiss(e),r.error(`${o.message.slice(0,20)}...`,{position:"top-right"})}},[a,t])},H=()=>s.jsxs("main",{className:"w-full h-full flex flex-col gap-4 mt-10 ml-2 pr-2",children:[s.jsxs("div",{className:"w-full flex flex-col gap-2",children:[s.jsx("h1",{className:"md:text-4xl text-2xl text-gray-300 font-belanosima",children:"Update Your Subscriptions"}),s.jsx("p",{className:"text-gray-400 font-barlow md:text-lg lg:w-[70%] md:w-[80%] w-full",children:"Effortlessly manage your employee salaries with precision and ease using StreamFlow's Salary Distribution Setup"})]}),s.jsx("section",{className:"w-full flex flex-col gap-3 border border-gray-600 bg-gray-800 py-6 md:px-10 px-6 rounded-md mt-8",children:s.jsx(k,{})})]}),k=()=>{const{address:a}=x(),t=W(a),c=D(),u=async e=>{await c(e)},l=R(),d=async e=>{await l(e)};return s.jsxs(I,{children:[s.jsx(T,{children:s.jsxs(g,{className:"hover:bg-transparent border-gray-600",children:[s.jsx(i,{className:"w-[100px] font-barlow text-gray-200",children:"S/N"}),s.jsx(i,{className:"font-barlow text-gray-200 ",children:"Plan Name"}),s.jsx(i,{className:" font-barlow text-gray-200",children:"Plan Fee"}),s.jsx(i,{className:" font-barlow text-gray-200",children:"Interval"}),s.jsx(i,{className:" font-barlow text-gray-200",children:"Status"}),s.jsx(i,{className:" font-barlow text-gray-200",children:"Action"})]})}),s.jsxs(M,{children:[(t==null?void 0:t.length)===0&&s.jsx(g,{className:"hover:bg-gray-400 group border-gray-600 font-barlow",children:s.jsx(n,{colSpan:6,className:"font-medium text-gray-400 group-hover:text-gray-800 text-base text-center",children:"No Subscription Found"})}),t==null?void 0:t.map((e,o)=>s.jsxs(g,{className:"hover:bg-gray-400 group border-gray-600 font-barlow",children:[s.jsx(n,{className:"font-medium text-gray-400 group-hover:text-gray-800",children:o+1}),s.jsx(n,{className:"text-gray-400 group-hover:text-gray-800",children:e.planName}),s.jsx(n,{className:" text-gray-400 group-hover:text-gray-800",children:e.planFee}),s.jsx(n,{className:" text-gray-400 group-hover:text-gray-800",children:"Monthly"}),s.jsx(n,{className:" text-gray-400 group-hover:text-gray-800",children:e.status?"Active":"Inactive"}),s.jsx(n,{className:" text-gray-400 group-hover:text-gray-800",children:s.jsxs(N,{children:[s.jsx(S,{asChild:!0,children:s.jsxs(j,{variant:"ghost",className:"h-8 w-8 p-0",children:[s.jsx("span",{className:"sr-only",children:"Open menu"}),s.jsx(v,{className:"h-4 w-4"})]})}),s.jsxs(P,{align:"end",className:"font-barlow",children:[s.jsx(C,{children:"Actions"}),e.status?s.jsx(m,{onClick:()=>u(e.planId),children:"Pause Subscription"}):s.jsx(m,{onClick:()=>d(e.planId),children:"Resume Subscription"})]})]})})]},o))]})]})};export{H as default};
