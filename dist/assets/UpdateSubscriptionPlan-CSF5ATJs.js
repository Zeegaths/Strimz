import{l as f,m as b,r as u,n as w,A as t,o as y,g as v,E as D,j as e,D as k,p as A,B as h,q as C,s as W,t as F,v as U,x as I,Q as E}from"./index-5lFW-7Db.js";import{n as M,d as $,s as B,a as T}from"./spotify-CiXDzTxn.js";import{u as q}from"./useGetSubscriptionPlans-BUsy5GRF.js";const G=()=>{const{chainId:i}=f(),{walletProvider:r}=b();return u.useCallback(async(c,d,n)=>{if(!w(i))return t.error("Wrong network !",{position:"top-right"});if(!r)return t.error("Please connect your wallet !",{position:"top-right"});if(n===0)return t.error("Please enter an amount !",{position:"top-right"});if(d==="")return t.error("Please enter a plan name !",{position:"top-right"});const o=await y(r).getSigner(),a=v(o),l=D(n.toString(),18),m=t.loading("Processing...",{position:"top-right"});try{const g=await a.updateSubscriptionPlan(c,d,l);console.log("transaction: ",g);const x=await g.wait();if(console.log("receipt: ",x),x.status)return t.dismiss(m),t.success("Subscription Plan Updated !",{position:"top-right"});t.dismiss(m),t.error("Subscription Plan Update failed !",{position:"top-right"})}catch(g){console.error(g),t.dismiss(m),t.error(`${g.message.slice(0,20)}...`,{position:"top-right"})}},[i,r])},H=()=>{const{chainId:i}=f(),{walletProvider:r}=b();return u.useCallback(async c=>{if(!w(i))return t.error("Wrong network !",{position:"top-right"});if(!r)return t.error("Please connect your wallet !",{position:"top-right"});const n=await y(r).getSigner(),p=v(n),o=t.loading("Processing...",{position:"top-right"});try{const a=await p.activateSubscriptionPlan(c);console.log("transaction: ",a);const l=await a.wait();if(console.log("receipt: ",l),l.status)return t.dismiss(o),t.success("Activation successful !",{position:"top-right"});t.dismiss(o),t.error("Activation failed !",{position:"top-right"})}catch(a){console.error(a),t.dismiss(o),t.error(`${a.message.slice(0,20)}...`,{position:"top-right"})}},[i,r])},O=()=>{const{chainId:i}=f(),{walletProvider:r}=b();return u.useCallback(async c=>{if(!w(i))return t.error("Wrong network !",{position:"top-right"});if(!r)return t.error("Please connect your wallet !",{position:"top-right"});const n=await y(r).getSigner(),p=v(n),o=t.loading("Processing...",{position:"top-right"});try{const a=await p.deactivateSubscriptionPlan(c);console.log("transaction: ",a);const l=await a.wait();if(console.log("receipt: ",l),l.status)return t.dismiss(o),t.success("Deactivation successful !",{position:"top-right"});t.dismiss(o),t.error("Deactivation failed !",{position:"top-right"})}catch(a){console.error(a),t.dismiss(o),t.error(`${a.message.slice(0,20)}...`,{position:"top-right"})}},[i,r])},J=()=>{const[i,r]=u.useState(""),[c,d]=u.useState(0),n=q(),p=G(),o=H(),a=O(),l=async s=>{await p(s,i,c),m()},m=()=>{r(""),d(0)},g=async s=>{await o(s)},x=async s=>{await a(s)},j=s=>{const{name:P,value:N}=s.target;P==="planName"?r(N):P==="planFee"&&d(Number(N))},S=u.useMemo(()=>[M,$,B,T],[]);return e.jsxs("main",{className:"w-full h-full flex flex-col gap-4 mt-8 ml-2 pr-4",children:[e.jsxs("div",{className:"w-full flex flex-col gap-2",children:[e.jsx("h1",{className:"md:text-4xl text-2xl text-gray-300 font-belanosima",children:"Update Subscription Plan"}),e.jsx("p",{className:"text-gray-400 font-barlow md:text-lg lg:w-[70%] md:w-[80%] w-full",children:"Effortlessly manage your employee salaries with precision and ease using StreamFlow's Salary Distribution Setup"})]}),e.jsxs("section",{className:"w-full flex flex-col my-4 gap-3",children:[e.jsx("h3",{className:"md:text-xl text-lg text-gray-300 font-belanosima",children:"Available Subscription Services"}),e.jsx("main",{className:"w-full grid grid-cols-2 gap-8",children:n==null?void 0:n.map(s=>e.jsxs("section",{className:"w-full flex flex-col gap-3 bg-gray-800 p-4 rounded-md",children:[e.jsx("div",{className:"w-full h-[200px] rounded-md overflow-hidden",children:e.jsx("img",{src:S[s.id],alt:"netflix",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"w-full flex justify-between px-3 items-center",children:[e.jsxs("h3",{className:"text-gray-300 font-barlow",children:["Plan Name: ",e.jsx("span",{className:"font-belanosima",children:s.name})]}),e.jsxs("h3",{className:"text-gray-300 font-barlow",children:["Plan Amount: ",e.jsxs("span",{className:"font-belanosima",children:[s.fee," OP"]})]})]}),e.jsxs("div",{className:"w-full flex justify-between px-3 items-center",children:[e.jsxs("h3",{className:"text-gray-300 font-barlow",children:["Plan Duration: ",e.jsx("span",{className:"font-belanosima",children:"Monthly"})]}),e.jsxs("h3",{className:"text-gray-300 font-barlow",children:["Plan Status: ",e.jsx("span",{className:"font-belanosima",children:s.isActive?"Active":"Deactivated"})]})]}),e.jsxs("div",{className:"w-full grid grid-cols-2 gap-4",children:[e.jsxs(k,{children:[e.jsx(A,{asChild:!0,children:e.jsx(h,{className:"text-gray-100 text-base font-barlow px-4 py-2 bg-sky-500 hover:bg-emerald-500",children:"Edit Plan"})}),e.jsxs(C,{className:"sm:max-w-[425px] font-barlow bg-gray-800 border-gray-600",children:[e.jsxs(W,{children:[e.jsxs(F,{className:"text-gray-300 font-barlow text-lg",children:["Update ",s.name," Plan"]}),e.jsx(U,{className:"text-gray-500",children:"Update the subscription plan details."})]}),e.jsxs("main",{className:"w-full grid gap-8",children:[e.jsxs("div",{className:"relative w-full font-barlow",children:[e.jsx("label",{className:"text-gray-300 ml-1 mb-1",children:"Plan Name"}),e.jsx("input",{type:"text",name:"planName",id:"planName",value:i,onChange:j,className:"block w-full rounded-md border text-sm px-3 py-1.5 placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 disabled:cursor-not-allowed disabled:opacity-50 bg-transparent border-gray-700 focus-visible:ring-sky-400 font-barlow text-gray-200 h-12"})]}),e.jsxs("div",{className:"relative w-full font-barlow",children:[e.jsx("label",{className:"text-gray-300 ml-1 mb-1",children:"Plan Fee"}),e.jsx("input",{type:"number",name:"planFee",id:"planFee",value:c,onChange:j,className:"block w-full rounded-md border text-sm px-3 py-1.5 placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 disabled:cursor-not-allowed disabled:opacity-50 bg-transparent border-gray-700 focus-visible:ring-sky-400 font-barlow text-gray-200 h-12"})]})]}),e.jsx(I,{children:e.jsx(E,{asChild:!0,children:e.jsx(h,{type:"button",onClick:()=>l(s.id),className:"text-gray-100 text-sm font-barlow px-4 py-2 flex justify-between items-center gap-1 bg-sky-500 hover:bg-emerald-500 disabled:cursor-not-allowed",children:"Update"})})})]})]}),s.isActive?e.jsx(h,{className:"text-gray-100 text-base font-barlow px-4 py-2 bg-red-500 hover:bg-emerald-500",onClick:()=>x(s.id),children:"Deactivate"}):e.jsx(h,{className:"text-gray-100 text-base font-barlow px-4 py-2 bg-emerald-500 hover:bg-emerald-500",onClick:()=>g(s.id),children:"Activate"})]})]},s.id))})]})]})};export{J as default};
