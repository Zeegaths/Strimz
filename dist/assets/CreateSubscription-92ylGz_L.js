import{l as N,m as v,r,n as S,A as t,o as P,g as k,j as e,D,p as C,B as f,q as A,s as I,t as E,v as M,x as T,T as W}from"./index-5lFW-7Db.js";import{n as F,d as B,s as L,a as q}from"./spotify-CiXDzTxn.js";import{u as z}from"./useGetSubscriptionPlans-BUsy5GRF.js";import{P as G}from"./index-CpVhjY-z.js";const H=()=>{const{chainId:o}=N(),{walletProvider:l}=v();return r.useCallback(async(d,n,m)=>{if(!S(o))return t.error("Wrong network !",{position:"top-right"});if(!l)return t.error("Please connect your wallet !",{position:"top-right"});if(n==="")return t.error("Please enter your email !",{position:"top-right"});if(m==="")return t.error("Please enter your password !",{position:"top-right"});const x=await P(l).getSigner(),c=k(x),i=t.loading("Processing...",{position:"top-right"});try{const a=await c.startSubscription(d,n,m);console.log("transaction: ",a);const u=await a.wait();if(console.log("receipt: ",u),u.status)return t.dismiss(i),t.success("Subscription Started !",{position:"top-right"});t.dismiss(i),t.error("Subscription starting failed !",{position:"top-right"})}catch(a){console.error(a),t.dismiss(i),t.error(`${a.message.slice(0,20)}...`,{position:"top-right"})}},[o,l])},$=()=>{const[o,l]=r.useState(""),[d,n]=r.useState(""),[m,g]=r.useState(!1),[x,c]=r.useState("submit"),i=s=>{const{name:p,value:b}=s.target;p==="email"?l(b):p==="password"&&n(b)},a=z(),u=H(),h=async s=>{g(!0),c("verifying"),setTimeout(async()=>{c("submitting"),await u(s,o,d),w(),g(!1),c("submit")},2e3)},w=()=>{l(""),n("")},y=r.useMemo(()=>[F,B,L,q],[]),j=r.useMemo(()=>["https://www.netflix.com/ng/","https://www.dstv.com/en-ng"],[]);return e.jsxs("main",{className:"w-full h-full flex flex-col gap-4 mt-8 ml-2 pr-4",children:[e.jsxs("div",{className:"w-full flex flex-col gap-2",children:[e.jsx("h1",{className:"md:text-4xl text-2xl text-gray-300 font-belanosima",children:"Subscription Setup"}),e.jsx("p",{className:"text-gray-400 font-barlow md:text-lg lg:w-[70%] md:w-[80%] w-full",children:"Effortlessly manage your employee salaries with precision and ease using StreamFlow's Salary Distribution Setup"})]}),e.jsxs("section",{className:"w-full flex flex-col my-4 gap-3",children:[e.jsx("h3",{className:"md:text-xl text-lg text-gray-300 font-belanosima",children:"Available Subscription Services"}),e.jsx("main",{className:"w-full grid grid-cols-2 gap-8",children:a==null?void 0:a.map(s=>e.jsxs("section",{className:"w-full flex flex-col gap-3 bg-gray-800 p-4 rounded-md",children:[e.jsx("div",{className:"w-full h-[200px] rounded-md overflow-hidden",children:e.jsx("img",{src:y[s.id],alt:"netflix",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"w-full flex justify-between px-3 items-center",children:[e.jsxs("h3",{className:"text-gray-300 font-barlow",children:["Plan Name: ",e.jsx("span",{className:"font-belanosima",children:s.name})]}),e.jsxs("h3",{className:"text-gray-300 font-barlow",children:["Plan Amount: ",e.jsxs("span",{className:"font-belanosima",children:[s.fee," OP"]})]})]}),e.jsxs("div",{className:"w-full flex justify-between px-3 items-center",children:[e.jsxs("h3",{className:"text-gray-300 font-barlow",children:["Plan Duration: ",e.jsx("span",{className:"font-belanosima",children:"Monthly"})]}),e.jsxs("h3",{className:"text-gray-300 font-barlow",children:["Plan Status: ",e.jsx("span",{className:"font-belanosima",children:s.isActive?"Active":"Deactivated"})]})]}),e.jsxs("p",{className:"text-gray-300 px-3 text-xs tracking-wide font-barlow",children:["If you don't have an account in ",e.jsx("span",{className:"text-emerald-500",children:s.name}),", click on ",e.jsx("span",{className:"text-emerald-500",children:s.name})," to create account. "]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("a",{href:j[s.id],target:"_blank",rel:"noopener noreferrer",className:"text-gray-100 text-base font-barlow px-4 py-2 hover:bg-sky-500 bg-emerald-500 disabled:opacity-50 disabled:cursor-not-allowed rounded-md",children:s.name}),e.jsxs(D,{children:[e.jsx(C,{asChild:!0,children:e.jsx(f,{disabled:!s.isActive,className:"text-gray-100 text-base font-barlow px-4 py-2 bg-sky-500 hover:bg-emerald-500 disabled:opacity-50 disabled:cursor-not-allowed",children:"Start Subscription"})}),e.jsxs(A,{className:"sm:max-w-[425px] font-barlow bg-gray-800 border-gray-600",children:[e.jsxs(I,{children:[e.jsxs(E,{className:"text-gray-300 font-barlow text-lg",children:[s.name," Subscription"]}),e.jsxs(M,{className:"text-gray-500",children:["Input your ",s.name," details"]})]}),e.jsxs("main",{className:"w-full grid gap-8",children:[e.jsxs("div",{className:"relative w-full font-barlow",children:[e.jsx("label",{className:"text-gray-300 ml-1 mb-1",children:"Email"}),e.jsx("input",{type:"text",name:"email",id:"email",value:o,onChange:i,className:"block w-full rounded-md border text-sm px-3 py-1.5 placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 disabled:cursor-not-allowed disabled:opacity-50 bg-transparent border-gray-700 focus-visible:ring-sky-400 font-barlow text-gray-200 h-12"})]}),e.jsxs("div",{className:"relative w-full font-barlow",children:[e.jsx("label",{className:"text-gray-300 ml-1 mb-1",children:"Password"}),e.jsx("input",{type:"password",name:"password",id:"password",value:d,onChange:i,className:"block w-full rounded-md border text-sm px-3 py-1.5 placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 disabled:cursor-not-allowed disabled:opacity-50 bg-transparent border-gray-700 focus-visible:ring-sky-400 font-barlow text-gray-200 h-12"})]})]}),e.jsx(T,{children:e.jsx(f,{type:"button",onClick:()=>h(s.id),className:"text-gray-100 text-sm font-barlow px-4 py-2 flex justify-between items-center gap-1 bg-sky-500 hover:bg-emerald-500 disabled:cursor-not-allowed capitalize",children:m?e.jsxs("span",{className:"flex items-center",children:[e.jsx(W,{className:"animate-spin text-2xl mr-1"}),x,"..."]}):e.jsxs("span",{className:"flex items-center",children:[x,e.jsx(G,{className:"text-xl ml-1"})]})})})]})]})]})]},s.id))})]})]})};export{$ as default};
