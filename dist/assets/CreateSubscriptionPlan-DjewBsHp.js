import{l as g,m as x,r as d,n as b,A as t,o as f,g as h,E as y,j as e,B as w,T as S}from"./index-5lFW-7Db.js";import{P as v}from"./index-CpVhjY-z.js";const j=(a,r)=>{const{chainId:l}=g(),{walletProvider:o}=x();return d.useCallback(async()=>{if(!b(l))return t.error("Wrong network !",{position:"top-right"});if(!o)return t.error("Please connect your wallet !",{position:"top-right"});if(r===0)return t.error("Please enter an amount !",{position:"top-right"});if(a==="")return t.error("Please enter a plan name !",{position:"top-right"});const c=await f(o).getSigner(),u=h(c),m=y(r.toString(),18),s=t.loading("Processing...",{position:"top-right"});try{const n=await u.addSubscriptionPlan(a,m);console.log("transaction: ",n);const p=await n.wait();if(console.log("receipt: ",p),p.status)return t.dismiss(s),t.success("Subscription Plan Created !",{position:"top-right"});t.dismiss(s),t.error("Subscription Plan Creation failed !",{position:"top-right"})}catch(n){console.error(n),t.dismiss(s),t.error(`${n.message.slice(0,20)}...`,{position:"top-right"})}},[l,o,a,r])},F=()=>e.jsxs("main",{className:"w-full h-full flex flex-col gap-4 mt-8 ml-2 pr-4",children:[e.jsxs("div",{className:"w-full flex flex-col gap-2",children:[e.jsx("h1",{className:"md:text-4xl text-2xl text-gray-300 font-belanosima",children:"Subscription Plan Setup"}),e.jsx("p",{className:"text-gray-400 font-barlow md:text-lg lg:w-[70%] md:w-[80%] w-full",children:"Effortlessly manage your employee salaries with precision and ease using StreamFlow's Salary Distribution Setup"})]}),e.jsx("section",{className:"w-full flex flex-col gap-3 border  border-gray-600 bg-gray-800 py-6 px-10 rounded-md mt-8",children:e.jsx(N,{})})]}),N=()=>{const[a,r]=d.useState(""),[l,o]=d.useState(0),[i,c]=d.useState(!1),u=j(a,l),m=async s=>{c(!0),s.preventDefault(),await u(),c(!1),r(""),o(0)};return e.jsxs("form",{className:"w-full grid gap-8",onSubmit:m,children:[e.jsxs("div",{className:"relative w-full font-barlow",children:[e.jsx("label",{className:"text-gray-300 ml-1 mb-1",children:"Plan Name"}),e.jsx("input",{type:"text",name:"planName",id:"planName",value:a,onChange:s=>r(s.target.value),className:"block w-full rounded-md border text-sm px-3 py-2 placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 disabled:cursor-not-allowed disabled:opacity-50 bg-transparent border-gray-700 focus-visible:ring-sky-400 font-barlow text-gray-200 h-12"})]}),e.jsxs("div",{className:"relative w-full font-barlow",children:[e.jsx("label",{className:"text-gray-300 ml-1 mb-1",children:"Plan Fee"}),e.jsx("input",{type:"number",name:"planFee",id:"planFee",value:l,onChange:s=>o(Number(s.target.value)),className:"block w-full rounded-md border text-sm px-3 py-2 placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 disabled:cursor-not-allowed disabled:opacity-50 bg-transparent border-gray-700 focus-visible:ring-sky-400 font-barlow text-gray-200 h-12"})]}),e.jsx("div",{className:"w-full",children:e.jsx(w,{type:"submit",className:`text-gray-100 text-sm mt-4 font-barlow px-4 py-2 flex justify-center items-center gap-1 bg-sky-500 hover:bg-emerald-500 ${i?"opacity-50 cursor-not-allowed":""}`,disabled:i,children:i?e.jsxs("span",{className:"flex items-center",children:[e.jsx(S,{className:"animate-spin text-2xl mr-1"}),"Submitting..."]}):e.jsxs("span",{className:"flex items-center",children:["Submit",e.jsx(v,{className:"text-xl ml-1"})]})})})]})};export{F as default};
