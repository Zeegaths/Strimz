import{r as s,a as v,h as P,b,f as T,i as l,w as m,W as R}from"./index-5lFW-7Db.js";const L=()=>{const[y,p]=s.useState([]),[g,i]=s.useState(0),[C,S]=s.useState(0),[k,f]=s.useState(0),{pathname:h}=v(),a=s.useCallback(async()=>{try{const r=(await P(b).getAllDailyStreams()).map(e=>({id:Number(e[0]),recipient:e[1],amount:T(e[2],18),lastPayment:e[3],startTime:e[4],intervalType:Number(e[5]),isactive:e[6],name:e[7],streamer:e[8]}));p(r)}catch(t){console.error(t)}},[]),c=s.useCallback(()=>{i(t=>t+1),a()},[a]),d=s.useCallback(()=>{S(t=>t+1),a()},[a]),u=s.useCallback(()=>{f(t=>t+1),a()},[a]);return h==="/user/updatesalarystream"&&setTimeout(()=>{a()},8e3),s.useEffect(()=>{a();const t={address:void 0,topics:[l("StreamCreated(uint256,address,IntervalType)")]};m.getLogs({...t,fromBlock:7787704}).then(n=>{i(n.length+1)});const o={address:void 0,topics:[l("StreamPaused(address,IntervalType)")]};m.getLogs({...o,fromBlock:7787704}).then(n=>{S(n.length+1)});const r={address:void 0,topics:[l("StreamResumed(address,IntervalType)")]};m.getLogs({...r,fromBlock:7787704}).then(n=>{f(n.length+1)});const e=new R(void 0);return e.on(t,c),e.on(o,d),e.on(r,u),()=>{e.off(t,c),e.off(o,d),e.off(r,u)}},[a,c,g,d,C,u,k]),y};export{L as u};
